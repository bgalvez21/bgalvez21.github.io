(function(a){'use strict';a(document).ready(function(){a('.es_subscription_form').each(function(){a(this).is(':hidden')&&a(this).on('submit',function(c){c.preventDefault();var d=a(this);b(d)})})});function c(d,a){var b=[],c=!1;return jQuery.each(d.serializeArray()||{},function(e,d){d.name==='esfpx_lists[]'?(b.push(d.value),c=!0):a[d.name]=d.value}),c&&(a['esfpx_lists[]']=b),a}function d(c,d){var g=c.status,b='success',e,f,h;g==='ERROR'&&(b='error'),e=c.message_text,f=a(d).next('.es_subscription_message'),f.attr('class','es_subscription_message '+b),f.html(e),h={detail:{es_response:b,msg:e},bubbles:!0,cancelable:!0},jQuery(d).trigger('es_response',[h])}function b(b,f){var f=f||!1,e={},g;return e=c(b,e),e.es='subscribe',e.action='es_add_subscriber',g=es_data.es_ajax_url,jQuery(b).find('#spinner-image').show(),a.ajax({type:'POST',url:g,data:e,dataType:'json',success:function(a){f||(a&&typeof a.status!='undefined'&&a.status==="SUCCESS"?(jQuery(b).slideUp('slow'),jQuery(b).hide()):jQuery(b).find('#spinner-image').hide()),jQuery(window).trigger('es.send_response',[jQuery(b),a]),d(a,b)},error:function(a){jQuery(b).find('#spinner-image').hide(),console.log(a,'error')}}),!1}jQuery(window).on("init.icegram",function(d,c){typeof c!='undefined'&&typeof c.messages!='undefined'&&jQuery('.icegram .es_shortcode_form, .icegram form[data-source="ig-es"]').each(function(d,c){jQuery(c).bind('submit',function(c){c.preventDefault();var d=a(this);b(d,!0)})})})})(jQuery)