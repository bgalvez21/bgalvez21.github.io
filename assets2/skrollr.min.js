/*!
 * skrollr core
 *
 * Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr
 *
 * Free to use under terms of MIT license
 */(function(c,w,q){'use strict';var s=c.skrollr={get:function(){return a},init:function(b){return a||new i(b)},VERSION:'0.6.10'},G=Object.prototype.hasOwnProperty,d=c.Math,F=c.getComputedStyle,Q='touchstart',R='touchmove',an='touchcancel',V='touchend',u='skrollable',H=u+'-before',W=u+'-between',I=u+'-after',v='skrollr',X='no-'+v,aC=v+'-desktop',aB=v+'-mobile',Z='linear',aa=1e3,ac=6e-4,at=200,ar='start',ak='end',al='center',M='bottom',y='___skrollable_id',ap=/^\s+|\s+$/g,aq=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,au=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,aI=/^([a-z\-]+)\[(\w+)\]$/,ax=/-([a-z])/g,aL=function(b,a){return a.toUpperCase()},P=/[\-+]?[\d]*\.?[\d]+/g,O=/\{\?\}/g,S=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,N=/[a-z\-]+-gradient/g,e='',t='',aK=function(){var b=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/,c,a;if(!F)return;c=F(k,null);for(a in c)if(e=a.match(b)||+a==a&&c[a].match(b),e)break;if(!e){e=t='';return}e=e[0],e.slice(0,1)==='-'?(t=e,e={'-webkit-':'webkit','-moz-':'Moz','-ms-':'ms','-o-':'O'}[e]):t='-'+e.toLowerCase()+'-'},aJ=function(){var a=c.requestAnimationFrame||c[e.toLowerCase()+'RequestAnimationFrame'],b=r();return(j||!a)&&(a=function(a){var e=r()-b,f=d.max(0,1e3/60-e);c.setTimeout(function(){b=r(),a()},f)}),a},z={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-d.cos(a*d.PI)/2+.5},sqrt:function(a){return d.sqrt(a)},outCubic:function(a){return d.pow(a-1,3)+1},bounce:function(b){var a;if(b<=.5083)a=3;else if(b<=.8489)a=9;else if(b<=.96208)a=27;else if(b<=.99981)a=91;else return 1;return 1-d.abs(3*d.cos(b*a*1.028)/a)}},f,k,aH,aG,aF,aE,aD,aA,az,$,ay,ab,L,aw,ae,af,av,ah,n,aj,B,r,ao,a,h,l,m,x,g,ai,ag,ad,p,J,_,am,E,b,Y,K,o,C,U,T,j,D,A;function i(b){var d,e;if(f=w.documentElement,k=w.body,aK(),a=this,b=b||{},ag=b.constants||{},b.easing)for(d in b.easing)z[d]=b.easing[d];return T=b.edgeStrategy||'set',m={beforerender:b.beforerender,render:b.render},x=b.forceHeight!==!1,x&&(ai=b.scale||1),Y=b.smoothScrolling!==!1,K=b.smoothScrollingDuration||at,o={targetTop:a.getScrollTop()},j=(b.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||c.opera)})(),j?(l=w.getElementById('skrollr-body'),l&&aw(),aH(),n(f,[v,aB],[X])):n(f,[v,aC],[X]),a.refresh(),ae(c,'resize orientationchange',function(){var a=f.clientWidth,b=f.clientHeight;(b!==am||a!==_)&&(am=b,_=a,E=!0)}),e=aJ(),function a(){aE(),e(a)}(),a}i.prototype.refresh=function(e){var A=!1,k,d,b,p,r,z,x,m,C,c,i,l,v,g,B,f,o,s,j,t;for(e===q?(A=!0,h=[],U=0,e=w.getElementsByTagName('*')):e=[].concat(e),d=0,k=e.length;d<k;d++){if(b=e[d],p=b,r=[],z=Y,x=T,!b.attributes)continue;for(m=0,C=b.attributes.length;m<C;m++){if(c=b.attributes[m],c.name==='data-anchor-target'){if(p=w.querySelector(c.value),p===null)throw'Unable to find anchor target "'+c.value+'"';continue}if(c.name==='data-smooth-scrolling'){z=c.value!=='off';continue}if(c.name==='data-edge-strategy'){x=c.value;continue}if(i=c.name.match(aq),i===null)continue;l=i[1],l=l&&ag[l.substr(1)]||0,v=(i[2]|0)+l,g=i[3],B=i[4]||g,f={offset:v,props:c.value,element:b},r.push(f),!g||g===ar||g===ak?(f.mode='absolute',g===ak?f.isEnd=!0:(f.frame=v*ai,delete f.offset)):(f.mode='relative',f.anchors=[g,B])}if(!r.length)continue;!A&&y in b?(j=b[y],o=h[j].styleAttr,s=h[j].classAttr):(j=b[y]=U++,o=b.style.cssText,s=ah(b)),h[j]={element:b,styleAttr:o,classAttr:s,anchorTarget:p,keyFrames:r,smoothScrolling:z,edgeStrategy:x},n(b,[u],[])}for(af(),d=0,k=e.length;d<k;d++){if(t=h[e[d][y]],t===q)continue;aD(t),az(t)}return a},i.prototype.relativeToAbsolute=function(i,e,g){var h=f.clientHeight,c=i.getBoundingClientRect(),b=c.top,d=c.bottom-c.top;return e===M?b-=h:e===al&&(b-=h/2),g===M?b+=d:g===al&&(b+=d/2),b+=a.getScrollTop(),b+.5|0},i.prototype.animateTo=function(f,c){var d,e;return c=c||{},d=r(),e=a.getScrollTop(),b={startTop:e,topDiff:f-e,targetTop:f,duration:c.duration||aa,startTime:d,endTime:d+(c.duration||aa),easing:z[c.easing||Z],done:c.done},b.topDiff||(b.done&&b.done.call(a,!1),b=q),a},i.prototype.stopAnimateTo=function(){b&&b.done&&b.done.call(a,!0),b=q},i.prototype.isAnimatingTo=function(){return!!b},i.prototype.setScrollTop=function(b,e){return e===!0&&(p=b,C=!0),j?D=d.min(d.max(b,0),g):c.scrollTo(0,b),a},i.prototype.getScrollTop=function(){return j?D:c.pageYOffset||f.scrollTop||k.scrollTop||0},i.prototype.on=function(b,c){return m[b]=c,a},i.prototype.off=function(b){return delete m[b],a},aH=function(){var b,m,n,e,i,j,l,r,h,o,p;ae(f,[Q,R,an,V].join(' '),function(s){var v,w,x,y,k,f,t,c,u;switch(s.preventDefault(),v=s.changedTouches[0],e=v.clientY,i=v.clientX,h=s.timeStamp,s.type){case Q:b&&b.blur(),a.stopAnimateTo(),b=s.target,m=j=e,n=i,r=h;break;case R:l=e-j,p=h-o,a.setScrollTop(D-l,!0),j=e,o=h;break;default:case an:case V:if(w=m-e,x=n-i,y=x*x+w*w,y<49){b.focus(),b.click();return}b=q,k=l/p,k=d.max(d.min(k,3),-3),f=d.abs(k/ac),t=k*f+.5*ac*f*f,c=a.getScrollTop()-t,u=0,c>g?(u=(g-c)/t,c=g):c<0&&(u=-c/t,c=0),f=f*(1-u),a.animateTo(c,{easing:'outCubic',duration:f});break}}),c.scrollTo(0,0),f.style.overflow=k.style.overflow='hidden'},aG=function(){for(var c=0,j=h.length,m,i,e,k,b,f,l;c<j;c++)for(f=h[c],l=f.element,m=f.anchorTarget,i=f.keyFrames,e=0,k=i.length;e<k;e++)b=i[e],b.mode==='relative'&&(L(l),b.frame=a.relativeToAbsolute(m,b.anchors[0],b.anchors[1])-b.offset,L(l,!0)),x&&!b.isEnd&&b.frame>g&&(g=b.frame);for(g=d.max(g,av()),c=0,j=h.length;c<j;c++){for(f=h[c],i=f.keyFrames,e=0,k=i.length;e<k;e++)b=i[e],b.isEnd&&(b.frame=g-b.offset);f.keyFrames.sort(ao)}},aF=function(y,x){for(var k=0,v=h.length,c,i,e,b,t,r,j,p,o,a,g,l,d,w,f,q,m;k<v;k++){if(c=h[k],i=c.element,e=c.smoothScrolling?y:x,b=c.keyFrames,t=b[0].frame,r=b[b.length-1].frame,j=e<t,p=e>r,o=b[j?0:b.length-1],j||p){if(j&&c.edge===-1||p&&c.edge===1)continue;switch(n(i,[j?H:I],[H,W,I]),c.edge=j?-1:1,c.edgeStrategy){case'reset':L(i);continue;case'ease':e=o.frame;break;default:case'set':l=o.props;for(a in l)G.call(l,a)&&(g=ab(l[a].value),s.setStyle(i,a,g));continue}}else c.edge!==0&&(n(i,[u,W],[H,I]),c.edge=0);for(d=0,w=b.length-1;d<w;d++)if(e>=b[d].frame&&e<=b[d+1].frame){f=b[d],q=b[d+1];for(a in f.props)G.call(f.props,a)&&(m=(e-f.frame)/(q.frame-f.frame),m=f.props[a].easing(m),g=ay(f.props[a].value,q.props[a].value,m),g=ab(g),s.setStyle(i,a,g));break}}},aE=function(){var c,f,d,e,i,h,k;E&&(E=!1,af()),c=a.getScrollTop(),d=r(),b?(d>=b.endTime?(c=b.targetTop,f=b.done,b=q):(e=b.easing((d-b.startTime)/b.duration),c=b.startTop+e*b.topDiff|0),a.setScrollTop(c,!0)):j||(i=o.targetTop-c,i&&(o={startTop:p,topDiff:c-p,targetTop:c,startTime:J,endTime:J+K}),d<=o.endTime&&(e=z.sqrt((d-o.startTime)/K),c=o.startTop+e*o.topDiff|0)),j&&l&&s.setStyle(l,'transform','translate(0, '+-D+'px) '+A),(C||p!==c)&&(ad=c>=p?'down':'up',C=!1,h={curTop:c,lastTop:p,maxTop:g,direction:ad},k=m.beforerender&&m.beforerender.call(a,h),k!==!1&&(aF(c,a.getScrollTop()),p=c,m.render&&m.render.call(a,h)),f&&f.call(a,!1)),J=d},aD=function(g){for(var d=0,i=g.keyFrames.length,f,a,b,c,h,e;d<i;d++){for(f=g.keyFrames[d],h={};(e=au.exec(f.props))!==null;)c=e[1],b=e[2],a=c.match(aI),a!==null?(c=a[1],a=a[2]):a=Z,b=b.indexOf('!')?aA(b):[b.slice(1)],h[c]={value:b,easing:z[a]};f.props=h}},aA=function(a){var b=[];return S.lastIndex=0,a=a.replace(S,function(a){return a.replace(P,function(a){return a/255*100+'%'})}),t&&(N.lastIndex=0,a=a.replace(N,function(a){return t+a})),a=a.replace(P,function(a){return b.push(+a),'{?}'}),b.unshift(a),b},az=function(b){for(var c={},a=0,d=b.keyFrames.length;a<d;a++)$(b.keyFrames[a],c);for(c={},a=b.keyFrames.length-1;a>=0;a--)$(b.keyFrames[a],c)},$=function(b,c){var a;for(a in c)G.call(b.props,a)||(b.props[a]=c[a]);for(a in b.props)c[a]=b.props[a]},ay=function(b,c,f){var d=b.length,a,e;if(d!==c.length)throw'Can\'t interpolate between "'+b[0]+'" and "'+c[0]+'"';for(e=[b[0]],a=1;a<d;a++)e[a]=b[a]+(c[a]-b[a])*f;return e},ab=function(a){var b=1;return O.lastIndex=0,a[0].replace(O,function(){return a[b++]})},L=function(c,f){var a,b,d,e;for(c=[].concat(c),d=0,e=c.length;d<e;d++){if(b=c[d],a=h[b[y]],!a)continue;f?(b.style.cssText=a.dirtyStyleAttr,n(b,a.dirtyClassAttr)):(a.dirtyStyleAttr=b.style.cssText,a.dirtyClassAttr=ah(b),b.style.cssText=a.styleAttr,n(b,a.classAttr))}},aw=function(){var a,b,c,d;A='translateZ(0)',s.setStyle(l,'transform',A),a=F(l),b=a.getPropertyValue('transform'),c=a.getPropertyValue(t+'transform'),d=b&&b!=='none'||c&&c!=='none',d||(A='')},s.setStyle=function(d,a,c){var b=d.style;if(a=a.replace(ax,aL).replace('-',''),a==='zIndex')b[a]=''+(c|0);else if(a==='float')b.styleFloat=b.cssFloat=c;else try{e&&(b[e+a.slice(0,1).toUpperCase()+a.slice(1)]=c),b[a]=c}catch(a){}},ae=s.addEvent=function(d,a,e){var f=function(a){return a=a||c.event,a.target||(a.target=a.srcElement),a.preventDefault||(a.preventDefault=function(){a.returnValue=!1}),e.call(this,a)},b,g;for(a=a.split(' '),b=0,g=a.length;b<g;b++)d.addEventListener?d.addEventListener(a[b],e,!1):d.attachEvent('on'+a[b],f)},af=function(){var b=a.getScrollTop();g=0,x&&!j&&(k.style.height='auto'),aG(),x&&!j&&(k.style.height=g+f.clientHeight+'px'),j?a.setScrollTop(d.min(a.getScrollTop(),g)):a.setScrollTop(b,!0),C=!0},av=function(){var a=l&&l.offsetHeight||0,b=d.max(a,k.scrollHeight,k.offsetHeight,f.scrollHeight,f.offsetHeight,f.clientHeight);return b-f.clientHeight},ah=function(a){var b='className';return c.SVGElement&&a instanceof c.SVGElement&&(a=a[b],b='baseVal'),a[b]},n=function(b,e,g){var d='className',a,h,i,f,j;if(c.SVGElement&&b instanceof c.SVGElement&&(b=b[d],d='baseVal'),g===q){b[d]=e;return}for(a=b[d],h=0,i=g.length;h<i;h++)a=B(a).replace(B(g[h]),' ');for(a=aj(a),f=0,j=e.length;f<j;f++)B(a).indexOf(B(e[f]))===-1&&(a+=' '+e[f]);b[d]=aj(a)},aj=function(a){return a.replace(ap,'')},B=function(a){return' '+a+' '},r=Date.now||function(){return+new Date},ao=function(a,b){return a.frame-b.frame},g=0,ai=1,ad='down',p=-1,J=r(),_=0,am=0,E=!1,U=0,j=!1,D=0})(window,document)